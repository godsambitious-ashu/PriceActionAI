<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Stock Chart</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>Stock Chart</h1>
    <form method="post">
        <label for="stock_code">Stock Code:</label>
        <input type="text" id="stock_code" name="stock_code" required>
        <label for="interval">Interval:</label>
        <select id="interval" name="interval">
            <option value="1d">1 Day</option>
            <option value="1wk">1 Week</option>
            <option value="1mo">1 Month</option>
        </select>
        <button type="submit">Get Chart</button>
    </form>

    {% if chart %}
        <h2>Candlestick Chart</h2>
        <div>{{ chart|safe }}</div>
    {% endif %}

    {% if demand_zones %}
        <h2>Demand Zones</h2>
        <ul>
        {% for zone in demand_zones %}
            <li>
                <strong>Zone ID:</strong> {{ zone['zone_id'] }}<br>
                <strong>Proximal Price:</strong> {{ zone['proximal'] }}<br>
                <strong>Distal Price:</strong> {{ zone['distal'] }}<br>
                <strong>Candles:</strong>
                <ul>
                {% for candle in zone['candles'] %}
                    <li>Date: {{ candle['date'] }}, Open: {{ candle['open'] }}, High: {{ candle['high'] }}, Low: {{ candle['low'] }}, Close: {{ candle['close'] }}, Type: {{ candle['type'] }}</li>
                {% endfor %}
                </ul>
            </li>
        {% endfor %}
        </ul>
    {% endif %}

    {% if error %}
        <p style="color: red;">Error: {{ error }}</p>
    {% endif %}
</body>
</html>
